{% extends 'base.html' %}
{% set server_info = get_server_info(serverID) %}
{% set launcher_info = get_launcher_info(serverID) %}

{% set title = "Ланучер " ~ server_info.name ~ " x" ~ server_info.rate_exp ?? "Not set name" %}

{% block content %}


<div id="showErrorStartLauncher" class="alert alert-icon-danger alert-dismissible d-none" role="alert">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <div class="alert-icon icon-part-danger">
        <i class="fa fa-times"></i>
    </div>
    <div class="alert-message">
        <span><strong>Ошибка:</strong> Запустите лаунчер, если у Вас его нет - загрузите.</span>
    </div>
</div>


<div class="row">

    <div class="col-lg-12">
        <div class="card">
            <div class="card-body">
                <ul class="nav nav-tabs nav-tabs-success top-icon nav-justified">
                    <li class="nav-item">
                        <a href="javascript:void();" data-target="#profile" data-toggle="pill"
                           class="nav-link active"><span class="hidden-xs">Лаунчер</span></a>
                    </li>
                    <li class="nav-item">
                        <a href="javascript:void();" data-target="#edit" data-toggle="pill" class="nav-link"><span
                                class="hidden-xs">Настройки</span></a>
                    </li>
                    <li class="nav-item">
                        <a href="javascript:void();" data-target="#messages" data-toggle="pill" class="nav-link"><span
                                class="hidden-xs">Описание</span></a>
                    </li>
                </ul>
                <div class="tab-content p-3">
                    <div class="tab-pane active" id="profile">
                        <div class="row">
                            <div class="col-md-3">

                                <div class="card">
                                    <div class="card-body text-center">


                                        <div class="card-action">
                                            <div class="dropdown">
                                                <a href="javascript:void();"
                                                   class="dropdown-toggle dropdown-toggle-nocaret"
                                                   data-toggle="dropdown">
                                                    <i class="icon-options"></i>
                                                </a>
                                                <div class="dropdown-menu dropdown-menu-right">
                                                    <a class="dropdown-item client_update" href="#">Обновить клиент</a>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="card-body">
                                            <div class="chart easy-pie-chart-4" id="main_panel_load" data-percent="0"
                                                 data-toggle="tooltip" data-placement="bottom" title=""
                                                 data-original-title="Загружено 0 / 0">
                                                <span class="percent"></span>
                                            </div>
                                            <hr>
                                            <div id="buttonGame"></div>

                                            <button
                                                    id="client_update_cancel"
                                                    class="btn-social-text btn-github waves-effect waves-light m-1 d-none">
                                                <i class="fa fa-refresh"></i> <span>Отменить</span>
                                            </button>

                                            {% if launcher_info %}
                                                {% for launcher in launcher_info %}
                                                    <button class="btn-social-text btn-tumblr waves-effect waves-light m-1 d-none startL2"
                                                            data-l2app="{{launcher['l2app']}}" data-args="{{launcher['args']}}">
                                                        {{phrase(launcher['phrase'])}}
                                                    </button>
                                                {% endfor %}
                                            {% else %}
                                                <button class="btn-social-text btn-tumblr waves-effect waves-light m-1 d-none startL2"
                                                        data-l2app="/system/l2.exe" data-args="">
                                                    {{phrase('launch_game')}}
                                                </button>
                                            {% endif %}

                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div class="col-md-9">


                                <div class="progress-wrapper mb-4">
                                    <p>Загружается: <span id="download_status_filename_1" data-toggle="tooltip"
                                                          data-placement="bottom" title="" data-original-title="0 kb">Нет</span>
                                        <span id="download_status_load_procent_1" class="float-right">0%</span></p>
                                    <div class="progress" style="height:7px;">
                                        <div class="progress-bar gradient-ibiza "
                                             id="download_status_load_procent_csswidth_1" style="width:0%"></div>
                                    </div>
                                </div>

                                <div class="progress-wrapper mb-4">
                                    <p>Загружается: <span id="download_status_filename_2" data-toggle="tooltip"
                                                          data-placement="bottom" title="" data-original-title="0 kb">Нет</span>
                                        <span id="download_status_load_procent_2" class="float-right">0%</span></p>
                                    <div class="progress" style="height:7px;">
                                        <div class="progress-bar gradient-quepal "
                                             id="download_status_load_procent_csswidth_2" style="width:0%"></div>
                                    </div>
                                </div>

                                <div class="progress-wrapper mb-4">
                                    <p>Загружается: <span id="download_status_filename_3" data-toggle="tooltip"
                                                          data-placement="bottom" title="" data-original-title="0 kb">Нет</span>
                                        <span id="download_status_load_procent_3" class="float-right">0%</span></p>
                                    <div class="progress" style="height:7px;">
                                        <div class="progress-bar gradient-blooker "
                                             id="download_status_load_procent_csswidth_3" style="width:0%"></div>
                                    </div>
                                </div>

                                <div class="progress-wrapper mb-4">
                                    <p>Загружается: <span id="download_status_filename_4" data-toggle="tooltip"
                                                          data-placement="bottom" title="" data-original-title="0 kb">Нет</span>
                                        <span id="download_status_load_procent_4" class="float-right">0%</span></p>
                                    <div class="progress" style="height:7px;">
                                        <div class="progress-bar gradient-ohhappiness "
                                             id="download_status_load_procent_csswidth_4" style="width:0%"></div>
                                    </div>
                                </div>

                                <div class="progress-wrapper">
                                    <p>Загружается: <span id="download_status_filename_5" data-toggle="tooltip"
                                                          data-placement="bottom" title="" data-original-title="0 kb">Нет</span>
                                        <span id="download_status_load_procent_5" class="float-right">0%</span></p>
                                    <div class="progress" style="height:7px;">
                                        <div class="progress-bar gradient-scooter"
                                             id="download_status_load_procent_csswidth_5" style="width:0%"></div>
                                    </div>
                                </div>

                            </div>

                            <div class="col-md-12">
                                <table id="eventNotification" class="table table-responsive-xl">
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>


                        </div>
                        <!--/row-->
                    </div>
                    <div class="tab-pane" id="messages">

                        <div class="row">
                            <div class="col-12 col-lg-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>Что это за лаунчер?</h6>
                                        <hr>
                                        <p>Как игроку мне надоело что нет стандартизации, что под каждый сервер
                                            приходится скачивать свой лаунчер.<br>
                                            Многие лаунчеры медленные, однопоточные, с достаточно маленькими
                                            возможностями и устаревшими подходами, которые вовсе не подходят для таких
                                            задач.<br>
                                            Я задался вопросом, можно ли сделать один лаунчер, который будет
                                            интегрирован в SphereWeb (данную систему) и обновлять необходимые
                                            пользователю сервера.</p>
                                        <p>Так и возникли первые наброски, через время достаточно работоспособное
                                            приложение, которое я развиваю.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>Что может лаунчер от SphereWeb?</h6>
                                        <hr>
                                        <p>
                                            Множественные одновременные загрузки файлов.<br>
                                            Возможность использовать ранее скаченные файлы (дубликаты) из архива.<br>
                                            Быстрейший алгоритм сравнения файлов.<br>
                                            Использует максимально продуктивно все ядра процессора для увеличения
                                            скорости обработки.<br>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-12 col-lg-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>Где получить информацию о лаунчере?</h6>
                                        <hr>
                                        <p>Единого сайта для обсуживания нет. Одноко, есть страница на github, в которой
                                            я попробую организовать общее представление о лаунчере.</p>
                                        <p><a href="cannabytes.github.io" target="_blank">cannabytes.github.io</a></p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-lg-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>Является ли лаунчер бесплатным?</h6>
                                        <hr>
                                        <p>
                                            Для пользователей (игроков) лаунчер бесплатный. Он является частью
                                            бесплатного open-source проекта SphereWeb.<br>
                                            Для администрации сервера взымается плата за аккредитацию.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-12 col-lg-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h6>Правила использования программного обеспечения</h6>
                                        <hr>
                                        <p>Изменение кода программы запрещено: Вы не можете изменять или модифицировать
                                            код программы без нашего разрешения. Если вы хотите внести какие-либо
                                            изменения, пожалуйста, свяжитесь с разработчком.</p>
                                        <p>Использование лаунчера (программы для обновления) в коммерческих целях
                                            запрещено: Наш лаунчер предназначен для обновления и не взымает плату с
                                            конечных пользователей. Вы не можете использовать его для коммерческих целей
                                            или продавать его третьим лицам.</p>
                                        <p>Использование лаунчера для незаконных действий запрещено: Вы не можете
                                            использовать наш лаунчер для незаконных действий.</p>
                                        <p>Мы не несем ответственности за любые повреждения, вызванные неправильным
                                            использованием нашего программного обеспечения. Пожалуйста, используйте наше
                                            программное обеспечение только в соответствии с его предназначением.</p>
                                        <p>Мы оставляем за собой право изменять эти правила использования в любое время.
                                            Если вы продолжаете использовать наше программное обеспечение, это означает,
                                            что вы соглашаетесь с измененными правилами.</p>
                                        <hr>
                                        <p>Выше основное положение, более детальное читайте на сайте <a
                                                href="cannabytes.github.io" target="_blank">cannabytes.github.io</a></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>


                    <div class="tab-pane" id="edit">
                        <div>

                            <div class="form-group row">
                                <label for="selectClient" class="col-sm-3 col-form-label">Папка для обновления
                                    клиента.<br>Под
                                    клиент: {{get_server_info(user_info('get_default_server'))['chronicle']}}</label>
                                <div class="card-body">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <button class="btn btn-github text-success" id="addClientDirectoryButton"
                                                    type="button">Добавить
                                            </button>
                                        </div>
                                        <select class="form-control custom-select-lg" id="selectClient"
                                                required></select>
                                        <div class="input-group-append">
                                            <button class="btn btn-github text-success" id="removeClientDir"
                                                    type="button">Удалить
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <hr>

                            <div class="form-group row">
                                <label for="isClientFilesArchive" class="col-sm-3 col-form-label">
                                    <div class="icheck-material-primary">
                                        <input type="checkbox" id="isClientFilesArchive">
                                        <label for="isClientFilesArchive">Сохранять загруженные файлы</label>
                                    </div>
                                </label>
                                <divs class="col-sm-8">
                                    Если "Да", лаунчер будет сохранять файлы патчей, для того чтоб не загружать их в
                                    будущем в случае если когда-то ранее Вы его уже загружали.<br>
                                    Данная опция может сократить время загрузки.
                                </divs>
                                <!--                                <button type="submit" class="btn btn-success col-sm-1"><i class="fa fa-plus"></i>-->
                                <!--                                    Указать папку-->
                                <!--                                </button>-->
                            </div>
                            <hr>
                            <div class="form-group row">
                                <label for="autoStartLauncher" class="col-sm-3 col-form-label">
                                    <div class="icheck-material-primary">
                                        <input type="checkbox" id="autoStartLauncher">
                                        <label for="autoStartLauncher">Автозагрузка</label>
                                    </div>
                                </label>
                                <div class="col-sm-8">
                                    Лаунчер не нужно будет запускать, он не потербляет память. После старта Windows,
                                    лаунчер будет загружен в память, и срабатывать только при обращении к нему.
                                    <br>
                                    <small class="mb-0 text-facebook">Рекомендуется*</small>
                                </div>
                            </div>
                            <hr>
                            <div class="form-group row">
                                <label for="autoUpdateLauncher" class="col-sm-3 col-form-label">
                                    <div class="icheck-material-primary">
                                        <input type="checkbox" id="autoUpdateLauncher">
                                        <label for="autoUpdateLauncher">Автообновление</label>
                                    </div>
                                </label>
                                <div class="col-sm-8">
                                    Лаунчер будет периодически проверять обновление, и обновляться если вышла новая
                                    версия.
                                    <br>
                                    <small class="mb-0 text-facebook">Рекомендуется*</small> [ У Вас -
                                    <spin class="userLauncherVersion">0</spin>
                                    версия лаунчера. Последняя версия -
                                    <spin class="actualLauncherVersion">0</spin>
                                    ]
                                </div>

                            </div>
                            <hr>

                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

</div>

<div class="modal fade" id="addClientDirectory" style="display: none;" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="dirfullpath">Мой компьютер</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card-body" id="dirlist"></div>
            </div>
            <div class="modal-footer">
                <div class="text-left" style="flex-grow: 1;">Укажите папку игры</div>
                <button type="button" data-server_id="{{serverID}}"
                        class="btn btn-primary saveDirClient" data-client-dir-path=""><i
                        class="fa fa-check-square-o"></i> Сохранить
                </button>
            </div>
        </div>
    </div>
</div>



{% endblock %}


{% block css %}
<!-- simplebar CSS-->
<link href="{{template('/assets/plugins/simplebar/css/simplebar.css')}}" rel="stylesheet"/>
<!-- Bootstrap core CSS-->
<link href="{{template('/assets/css/bootstrap.min.css')}}" rel="stylesheet"/>
<!-- animate CSS-->
<link href="{{template('/assets/css/animate.css')}}" rel="stylesheet" type="text/css"/>
<!-- Icons CSS-->
<link href="{{template('/assets/css/icons.css')}}" rel="stylesheet" type="text/css"/>
<!-- Sidebar CSS-->
<link href="{{template('/assets/css/sidebar-menu.css')}}" rel="stylesheet"/>
<!-- Custom Style-->
<link href="{{template('/assets/css/app-style.css')}}" rel="stylesheet"/>
<!-- skins CSS-->
<link href="{{template('/assets/css/skins.css')}}" rel="stylesheet"/>
<!-- Vector CSS -->
<link href="{{template('/assets/plugins/vectormap/jquery-jvectormap-2.0.2.css')}}" rel="stylesheet"/>

<style>

    figure {
        display: inline-block;
        max-width: 100%;
        text-align: center;
    }

    figcaption {
        max-width: 140px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
        word-wrap: break-word;
    }


</style>

{% endblock %}

{% block js %}

<!-- Easy Pie Chart JS -->
<script src="{{template('/assets/plugins/jquery.easy-pie-chart/jquery.easypiechart.min.js')}}"></script>
<script src="{{template('/assets/plugins/jquery.easy-pie-chart/easy-pie-chart.init.js')}}"></script>

<!--[if IE]>
<script type="text/javascript" src="{{template('/assets/jquery-knob/excanvas.js')}}"></script>
<![endif]-->
<script src="{{template('/assets/plugins/jquery-knob/excanvas.js')}}"></script>
<script src="{{template('/assets/plugins/jquery-knob/jquery.knob.js')}}"></script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.3/dist/sweetalert2.all.min.js"></script>
<script>
        $(function() {
            $(".knob").knob();
        });
</script>


<script src="{{template('/launcher/launcher.js')}}"></script>

{% endblock %}

