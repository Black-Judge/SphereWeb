{% extends 'basic/base.html' %}

{% block title %}{% endblock %}

{% block content %}
<div class="content">
<div class="block block-rounded">


    <div class="block-header block-header-default">
        <h3 class="block-title">Лаунчера данные</h3>
    </div>
    <div class="block-content">
        <div class="row">
            <div class="col-lg-4">
                <p class="text-muted">
                    Краткие данные лаунчера
                </p>
            </div>
            <div class="col-lg-8 col-xl-5">
                <!-- Form Labels on top - Default Style -->
                <div class="mb-5" >
                    <div class="mb-4">
                        <label class="form-label" for="server">Сервер</label>
                        <select class="form-select" id="server" name="server">
                            {% for server in get_server_info() %}
                            <option value="{{server.id}}">{{server.name}} x{{server.rate_exp}} - {{server.chronicle}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="form-label" for="autoload">Показывать аккаунты для автозагрузки ?<br>
                            Если клиент поддерживает автовход в игру, используя аргументы в l2.exe.</label>
                        <select class="form-select" id="autoload" name="autoload">
                            <option value="off">Нет</option>
                            <option value="on">Да</option>
                        </select>
                    </div>
                    <div class="mb-4">
                        <label class="form-label" for="tokenApi">Token API</label>
                        <input type="text" class="form-control" id="tokenApi" name="tokenApi" placeholder="Key">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


    <div class="row text-center">
        <div class="col-6">
            <div class="block block-rounded">
                <div class="block-content">
                    <div class="block block-rounded">
                        <div class="block-header block-header-default">
                            <h3 class="block-title">Кнопка запуска игры #1</h3>
                        </div>
                        <div class="block-content">
                            <div class="mb-4">
                                <label class="form-label" for="l2exe_1">l2exe</label>
                                <input type="text" class="form-control" id="l2exe_1" value="/system/l2.exe"
                                       name="l2exe_1" placeholder="/system/l2.exe">
                            </div>
                            <div class="mb-4">
                                <label class="form-label" for="args_1">args</label>
                                <input type="text" class="form-control" id="args_1" name="arg_1" placeholder="">
                            </div>

                            <div class="mb-4">
                                <label class="form-label" for="background_1">Изображение кнопки</label>
                                <input type="text" class="form-control"
                                       value="src/component/plugins/launcher/tpl/img/l2_button.jpg" id="background_1"
                                       name="background_1" placeholder="background">
                            </div>

                            <hr>
                            <div class="mb-4">
                                <label class="form-label" for="button_start_ru_1">Название кнопки запуска на русском</label>
                                <input type="text" class="form-control" id="button_start_ru_1" name="button_start_ru_1" value="Запустить игру" placeholder="Запустить игру">
                            </div>
                            <div class="mb-4">
                                <label class="form-label" for="button_start_en_1">Название кнопки запуска на
                                    английском</label>
                                <input type="text" class="form-control" id="button_start_en_1" name="button_start_en_1" value="Start Play" placeholder="Start Play">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-6">
            <div class="block block-rounded">
                <div class="block-content">
                    <div class="block block-rounded">
                        <div class="block-header block-header-default">
                            <h3 class="block-title">Кнопка запуска игры #2 - (Если не нужна, оставьте пустым)</h3>
                        </div>
                        <div class="block-content">
                            <div class="mb-4">
                                <label class="form-label" for="l2exe_2">l2exe</label>
                                <input type="text" class="form-control" id="l2exe_2" name="l2exe_2" placeholder="/system/l2.exe">
                            </div>
                            <div class="mb-4">
                                <label class="form-label" for="args_2">args</label>
                                <input type="text" class="form-control" id="args_2" name="args_2" placeholder="args">
                            </div>

                            <div class="mb-4">
                                <label class="form-label" for="background_2">Изображение кнопки</label>
                                <input type="text" class="form-control" id="background_2" value="src/component/plugins/launcher/tpl/img/l2_button.jpg" name="background_2" placeholder="background">
                            </div>
                            <hr>

                            <div class="mb-4">
                                <label class="form-label" for="button_start_ru_2">Название кнопки запуска на русском</label>
                                <input type="text" class="form-control" id="button_start_ru_2" name="button_start_ru_2" value="Запустить игру" placeholder="Запустить игру">
                            </div>
                            <div class="mb-4">
                                <label class="form-label" for="button_start_en_2">Название кнопки запуска на
                                    английском</label>
                                <input type="text" class="form-control" id="button_start_en_2" name="button_start_en_2"
                                       value="Start Play" placeholder="Start Play">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row text-center">
        <div class="row mb-4">
            <div class="col-sm-12 ms-auto">
                <button type="submit" id="set_config" class="btn btn-primary">Сохранить</button>
            </div>
        </div>
    </div>

</div>

<script>

    $(document).on("click", "#set_config", function () {
        var formData = {};
        $('.content :input').each(function() {
            var element = $(this);
            var name = element.attr('name');
            var value = element.val();
            if (name) {
                formData[name] = value;
            }
        });

        $.ajax({
            url: "/admin/launcher/add",
            data: formData,
            method: "POST",
            success: function (response) {
                if (response) {
                    console.log(response);
                }
            },
            error: function (error) {
            }
        });
    })


</script>
{% endblock %}